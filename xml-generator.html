<!doctype html>
<html lang="ru">
<head>
	<!-- Yandex.Metrika counter -->
	<script type="text/javascript">
	  (function(m,e,t,r,i,k,a){
	      m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)}
	      m[i].l=1*new Date();
	      for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
	      k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
	  })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=106828542', 'ym');
	
	  ym(106828542, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", referrer: document.referrer, url: location.href, accurateTrackBounce:true, trackLinks:true});
	</script>
	<noscript>
		<div>
			<img src="https://mc.yandex.ru/watch/106828542" style="position:absolute; left:-9999px;" alt="" />
		</div>
	</noscript>
<!-- /Yandex.Metrika counter -->

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Онлайн генератор XML (ТЭП / АГР)</title>

<link rel="stylesheet" href="assets/css/xml-generator.css?v=2">

</head>

<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Онлайн генератор XML (ТЭП / АГР)</h1>
        <div class="subtitle">
          Ручной ввод по структуре XML и извлечение данных из IFC без визуализации. Обязательные параметры выделены. Справа — прогресс заполнения и предпросмотр XML.
        </div>
      </div>
      <div class="badge"><span class="dot"></span>Сервис доступен</div>
    </header>

    <div class="grid">

      <!-- LEFT -->
      <div class="card">
        <div class="card-h">
          <div class="title">Источник данных</div>
          <div class="tabs">
            <div class="tab active" id="tabManual">Ручной ввод</div>
            <div class="tab" id="tabIfc">IFC</div>
          </div>
        </div>

        <div class="card-b">

          <!-- MANUAL PANEL -->
          <div id="panelManual">

            <div class="section">
              <div class="section-h">
                <div class="name">Основная информация</div>
                <div class="hint">Заполните обязательные поля, затем «Сгенерировать XML».</div>
              </div>
              <div class="form">
                <div class="row">
                  <div>
                    <label>ObjectName (Наименование объекта)<span class="reqMark">обязательно</span></label>
                    <input id="ObjectName" class="is-required" type="text" placeholder='Напр.: Жилой комплекс "Примерный" с торговым центром' />
                    <div class="help"><span class="k">Параметр:</span>название объекта для идентификации в выгрузке.</div>
                  </div>
                  <div>
                    <label>RegistrationNumber (Регистрационный номер)</label>
                    <input id="RegistrationNumber" type="text" placeholder="Напр.: РН-2024-001" />
                    <div class="help"><span class="k">Параметр:</span>номер регистрации/учёта (если используется).</div>
                  </div>
                </div>

                <div class="row">
                  <div>
                    <label>Date (YYYY-MM-DD)</label>
                    <input id="Date" type="date" />
                    <div class="help"><span class="k">Параметр:</span>дата формирования/утверждения набора данных.</div>
                  </div>
                  <div>
                    <label>UUID (Уникальный ID объекта)</label>
                    <input id="UUID" type="text" placeholder="Напр.: UID-77-2024-001" />
                    <div class="help"><span class="k">Параметр:</span>внутренний уникальный идентификатор (если нужен).</div>
                  </div>
                </div>

                <div>
                  <label>Address (Адрес)<span class="reqMark">обязательно</span></label>
                  <input id="Address" class="is-required" type="text" placeholder="Напр.: г. Москва, ул. Примерная, д. 1" />
                  <div class="help"><span class="k">Параметр:</span>адрес/описание местоположения объекта.</div>
                </div>

                <div class="hr"></div>

                <div class="row">
                  <div class="small">
                    Списки ниже — повторяющиеся номера (можно добавлять несколько).
                  </div>
                  <div></div>
                </div>

                <div id="list_CadastralNumbers"></div>
                <div id="list_GPZUNumbers"></div>
                <div id="list_PPTNumbers"></div>
                <div id="list_GZKDecisionNumbers"></div>
                <div id="list_KRTNumbers"></div>
                <div id="list_PPMNumbers"></div>

              </div>
            </div>

            <div class="section">
              <div class="section-h">
                <div class="name">Проектная организация</div>
                <div class="hint">Обязательные поля + состав команды.</div>
              </div>
              <div class="form">
                <div class="row">
                  <div>
                    <label>ProjectOrganization<span class="reqMark">обязательно</span></label>
                    <input id="ProjectOrganization" class="is-required" type="text" placeholder='Напр.: ООО "Проектная организация ..."' />
                    <div class="help"><span class="k">Параметр:</span>наименование проектной организации.</div>
                  </div>
                  <div>
                    <label>ProjectTeamLead<span class="reqMark">обязательно</span></label>
                    <input id="ProjectTeamLead" class="is-required" type="text" placeholder="ФИО" />
                    <div class="help"><span class="k">Параметр:</span>ответственный руководитель/ГИП (если применимо).</div>
                  </div>
                </div>

                <div id="list_ProjectTeam"></div>

                <div class="row">
                  <div>
                    <label>WorkTypes (Виды работ)<span class="reqMark">обязательно</span></label>
                    <select id="WorkTypes" class="is-required">
                      <option value="">— выберите —</option>
                      <option value="новое строительство">новое строительство</option>
                      <option value="реконструкция">реконструкция</option>
                      <option value="новое строительство и реконструкция">новое строительство и реконструкция</option>
                    </select>
                    <div class="help"><span class="k">Параметр:</span>тип работ по объекту (из фиксированного списка).</div>
                  </div>
                  <div></div>
                </div>

                <div id="list_FunctionalPurposes"></div>
              </div>
            </div>

            <div class="section">
              <div class="section-h">
                <div class="name">ТЭП (по таблице)</div>
                <div class="hint">Часть полей может быть «при наличии».</div>
              </div>
              <div class="form">

                <div class="row">
                  <div>
                    <label>1. Высота застройки (м)<span class="reqMark">обязательно</span></label>
                    <input id="BuildingHeight" class="is-required" type="number" step="0.01" placeholder="15.5" />
                    <div class="help"><span class="k">Параметр:</span>высота застройки (число, м).</div>
                  </div>
                  <div>
                    <label>2. Площадь участка (га)<span class="reqMark">обязательно</span></label>
                    <input id="Area" class="is-required" type="number" step="0.0001" placeholder="1.25" />
                    <div class="help"><span class="k">Параметр:</span>площадь земельного участка (число, гектары).</div>
                  </div>
                </div>

                <div class="row">
                  <div>
                    <label>3. Суммарная поэтажная площадь (всего), кв.м<span class="reqMark">обязательно</span></label>
                    <input id="TotalFloorArea" class="is-required" type="number" step="0.01" placeholder="25000.75" />
                    <div class="help"><span class="k">Параметр:</span>в габаритах наружных стен (всего).</div>
                  </div>
                  <div>
                    <label>9. Количество квартир, шт.<span class="reqMark">обязательно</span></label>
                    <input id="ApartmentsCount" class="is-required" type="number" step="1" min="1" placeholder="200" />
                    <div class="help"><span class="k">Параметр:</span>целое положительное.</div>
                  </div>
                </div>

                <div class="row">
                  <div>
                    <label>Высота объекта (м)<span class="reqMark">обязательно</span></label>
                    <input id="ObjectHeight" class="is-required" type="number" step="0.01" placeholder="75.5" />
                    <div class="help"><span class="k">Параметр:</span>высота объекта (число, м).</div>
                  </div>
                  <div>
                    <label>Этажность (шт.)<span class="reqMark">обязательно</span></label>
                    <input id="FloorsCount" class="is-required" type="number" step="1" min="1" placeholder="20" />
                    <div class="help"><span class="k">Параметр:</span>целое положительное.</div>
                  </div>
                </div>

                <div class="hr"></div>

                <div class="row">
                  <div>
                    <label>3.1. Суммарная поэтажная площадь жилых объектов, кв.м (при наличии)</label>
                    <input id="ResidentialPartArea" type="number" step="0.01" />
                    <div class="help"><span class="k">Параметр:</span>3.1 из таблицы (если применимо).</div>
                  </div>
                  <div>
                    <label>3.1.1 Жилая часть (при наличии), кв.м</label>
                    <input id="ResidentialPartOfResidentialArea" type="number" step="0.01" />
                    <div class="help"><span class="k">Параметр:</span>3.1.1 из таблицы.</div>
                  </div>
                </div>

                <div class="row">
                  <div>
                    <label>3.1.2 Нежилая часть (при наличии), кв.м</label>
                    <input id="NonResidentialPartOfResidentialArea" type="number" step="0.01" />
                    <div class="help"><span class="k">Параметр:</span>3.1.2 из таблицы.</div>
                  </div>
                  <div>
                    <label>3.2 Суммарная поэтажная площадь нежилых объектов (при наличии), кв.м</label>
                    <input id="NonResidentialObjectsArea" type="number" step="0.01" />
                    <div class="help"><span class="k">Параметр:</span>3.2 из таблицы.</div>
                  </div>
                </div>

                <div class="row">
                  <div>
                    <label>4. Общая площадь объекта (при наличии), кв.м</label>
                    <input id="TotalObjectArea" type="number" step="0.01" />
                    <div class="help"><span class="k">Параметр:</span>4 из таблицы.</div>
                  </div>
                  <div>
                    <label>4.1 Наземная площадь, кв.м</label>
                    <input id="AboveGroundArea" type="number" step="0.01" />
                    <div class="help"><span class="k">Параметр:</span>4.1 из таблицы.</div>
                  </div>
                </div>

                <div class="row">
                  <div>
                    <label>4.2 Подземная площадь, кв.м</label>
                    <input id="UndergroundArea" type="number" step="0.01" />
                    <div class="help"><span class="k">Параметр:</span>4.2 из таблицы.</div>
                  </div>
                  <div>
                    <label>5. Нежилая наземная площадь нежилой части жилых зданий, кв.м</label>
                    <input id="NonResidentialAboveGroundAreaNonResidentialPart" type="number" step="0.01" />
                    <div class="help"><span class="k">Параметр:</span>5 из таблицы.</div>
                  </div>
                </div>

                <div class="row">
                  <div>
                    <label>6. Нежилая наземная площадь нежилых объектов, кв.м</label>
                    <input id="NonResidentialAboveGroundAreaNonResidentialObjects" type="number" step="0.01" />
                    <div class="help"><span class="k">Параметр:</span>6 из таблицы.</div>
                  </div>
                  <div>
                    <label>7. Общая площадь квартир, кв.м</label>
                    <input id="TotalApartmentsArea" type="number" step="0.01" />
                    <div class="help"><span class="k">Параметр:</span>7 из таблицы.</div>
                  </div>
                </div>

                <div class="row">
                  <div>
                    <label>8. Площадь квартир (без летних помещений), кв.м</label>
                    <input id="ApartmentsAreaExSummerPremises" type="number" step="0.01" />
                    <div class="help"><span class="k">Параметр:</span>8 из таблицы.</div>
                  </div>
                  <div>
                    <label>10. Площадь озеленения, кв.м</label>
                    <input id="GreenArea" type="number" step="0.01" />
                    <div class="help"><span class="k">Параметр:</span>10 из таблицы.</div>
                  </div>
                </div>

                <div class="row">
                  <div>
                    <label>— Площадь детских площадок, кв.м</label>
                    <input id="ChildrenPlaygroundArea" type="number" step="0.01" />
                    <div class="help"><span class="k">Параметр:</span>подпункт к озеленению.</div>
                  </div>
                  <div>
                    <label>— Площадь площадок для отдыха взрослых, кв.м</label>
                    <input id="RecreationsArea" type="number" step="0.01" />
                    <div class="help"><span class="k">Параметр:</span>подпункт к озеленению.</div>
                  </div>
                </div>

                <div class="hr"></div>

                <div class="row">
                  <div>
                    <label>Общая площадь квартир (альтернативное поле), кв.м</label>
                    <input id="ApartmentsArea" type="number" step="0.01" />
                    <div class="help"><span class="k">Параметр:</span>если нужно отдельно «ApartmentsArea» (в схеме присутствует).</div>
                  </div>
                  <div>
                    <label>Инф. конструкции: количество (шт.)</label>
                    <input id="InformationStructuresCount" type="number" step="1" min="1" />
                    <div class="help"><span class="k">Параметр:</span>опционально.</div>
                  </div>
                </div>

                <div class="row">
                  <div>
                    <label>Инф. конструкции: параметры/описание</label>
                    <input id="InformationStructuresParameters" type="text" />
                    <div class="help"><span class="k">Параметр:</span>опционально.</div>
                  </div>
                  <div></div>
                </div>

              </div>
            </div>

            <div class="btns">
              <button class="primary" id="btnGenerateManual">Сформировать XML</button>
              <button class="ghost" id="btnFillDemo">Заполнить демо</button>
              <span class="pill" id="manualStatus">Готово</span>
            </div>

          </div>

          <!-- IFC PANEL -->
          <div id="panelIfc" style="display:none;">

            <div id="ifcProtocolWarn" class="warn" style="display:none;">
              IFC-режим не запустится при открытии файла как <span class="mono">file://</span> (браузер блокирует загрузку модулей/WASM).
              Открой страницу через локальный HTTP (например: <span class="mono">python -m http.server</span>) и зайди на <span class="mono">http://localhost:8000</span>.
            </div>

            <div class="section">
              <div class="section-h">
                <div class="name">Загрузка IFC</div>
                <div class="hint">Параметры считываются, модель не визуализируется</div>
              </div>
              <div class="form">

                <div class="row">
                  <div>
                    <label>IFC-файл</label>
                    <input id="ifcFile" type="file" accept=".ifc" />
                    <div class="help"><span class="k">Параметр:</span>выберите .ifc, будет прочитан локально в браузере.</div>
                  </div>
                  <div>
                    <div class="small" style="margin-top: 4px;">
                      web-ifc WASM в браузере. Для больших IFC извлечение pset может занять время.
                    </div>
                  </div>
                </div>

                <div class="status">
                  <div class="progress" title="Чтение файла"><div class="bar" id="barRead"></div></div>
                  <span class="pill" id="readLabel">Чтение: 0%</span>

                  <div class="progress" title="Парсинг IFC"><div class="bar" id="barParse"></div></div>
                  <span class="pill" id="parseLabel">Парсинг: 0%</span>

                  <span class="pill" id="ifcState">IFC не загружен</span>
                </div>

                <div id="ifcErrors" class="errorText" style="display:none; margin-top: 8px;"></div>

              </div>
            </div>

            <div class="section">
              <div class="section-h">
                <div class="name">Найденные значения → обязательные поля</div>
                <div class="hint">Обязательные параметры выделены</div>
              </div>
              <div class="form">

                <details>
                  <summary>Сопоставление (источник значения для каждого поля) — по желанию</summary>
                  <div class="small" style="margin-top:8px;">
                    Выберите, из какого IFC-атрибута/pset брать значение. Формат: <span class="mono">Entity::Pset::Prop</span> или <span class="mono">Entity::Attr</span>.
                  </div>
                  <div class="row" style="margin-top:10px;">
                    <div><label>ObjectName</label><select id="map_ObjectName"></select></div>
                    <div><label>Address</label><select id="map_Address"></select></div>
                  </div>
                  <div class="row">
                    <div><label>ProjectOrganization</label><select id="map_ProjectOrganization"></select></div>
                    <div><label>ProjectTeamLead</label><select id="map_ProjectTeamLead"></select></div>
                  </div>
                  <div class="row">
                    <div><label>BuildingHeight</label><select id="map_BuildingHeight"></select></div>
                    <div><label>Area</label><select id="map_Area"></select></div>
                  </div>
                  <div class="row">
                    <div><label>TotalFloorArea</label><select id="map_TotalFloorArea"></select></div>
                    <div><label>ApartmentsCount</label><select id="map_ApartmentsCount"></select></div>
                  </div>
                  <div class="row">
                    <div><label>ObjectHeight</label><select id="map_ObjectHeight"></select></div>
                    <div><label>FloorsCount</label><select id="map_FloorsCount"></select></div>
                  </div>

                  <div class="btns" style="margin-top:10px;">
                    <button id="btnApplyMapping" class="primary">Применить сопоставление</button>
                    <span class="pill" id="mapStatus">Сопоставление не применено</span>
                  </div>
                </details>

                <div class="hr"></div>

                <div class="row">
                  <div>
                    <label>ObjectName<span class="reqMark">обязательно</span></label>
                    <input id="ifc_ObjectName" class="is-required" type="text" />
                  </div>
                  <div>
                    <label>Address<span class="reqMark">обязательно</span></label>
                    <input id="ifc_Address" class="is-required" type="text" />
                  </div>
                </div>

                <div class="row">
                  <div>
                    <label>ProjectOrganization<span class="reqMark">обязательно</span></label>
                    <input id="ifc_ProjectOrganization" class="is-required" type="text" />
                  </div>
                  <div>
                    <label>ProjectTeamLead<span class="reqMark">обязательно</span></label>
                    <input id="ifc_ProjectTeamLead" class="is-required" type="text" />
                  </div>
                </div>

                <div class="row">
                  <div>
                    <label>Высота застройки (BuildingHeight, м)<span class="reqMark">обязательно</span></label>
                    <input id="ifc_BuildingHeight" class="is-required" type="number" step="0.01" />
                  </div>
                  <div>
                    <label>Площадь участка (Area, га)<span class="reqMark">обязательно</span></label>
                    <input id="ifc_Area" class="is-required" type="number" step="0.0001" />
                  </div>
                </div>

                <div class="row">
                  <div>
                    <label>Суммарная поэтажная площадь (TotalFloorArea, кв.м)<span class="reqMark">обязательно</span></label>
                    <input id="ifc_TotalFloorArea" class="is-required" type="number" step="0.01" />
                  </div>
                  <div>
                    <label>Количество квартир (ApartmentsCount, шт.)<span class="reqMark">обязательно</span></label>
                    <input id="ifc_ApartmentsCount" class="is-required" type="number" step="1" min="1" />
                  </div>
                </div>

                <div class="row">
                  <div>
                    <label>Высота объекта (ObjectHeight, м)<span class="reqMark">обязательно</span></label>
                    <input id="ifc_ObjectHeight" class="is-required" type="number" step="0.01" />
                  </div>
                  <div>
                    <label>Этажность (FloorsCount, шт.)<span class="reqMark">обязательно</span></label>
                    <input id="ifc_FloorsCount" class="is-required" type="number" step="1" min="1" />
                  </div>
                </div>

                <div class="btns">
                  <button class="primary" id="btnGenerateFromIfc">Сформировать XML</button>
                  <button class="ghost" id="btnCopyIfcToManual">Перенести в «Ручной ввод»</button>
                  <span class="pill" id="ifcStatus">Ожидание</span>
                </div>

              </div>
            </div>

            <details id="allIfcDetails">
              <summary>Все найденные атрибуты и свойства из IFC (свёрнуто по умолчанию)</summary>

              <div class="row" style="margin-top:10px;">
                <div>
                  <label>Фильтр (по имени/pset/prop)</label>
                  <input id="ifcFilter" type="text" placeholder="например: Gross, Height, Address, Pset_..." />
                </div>
                <div>
                  <label>Показать строк</label>
                  <select id="ifcLimit">
                    <option value="200">200</option>
                    <option value="500">500</option>
                    <option value="1000">1000</option>
                    <option value="5000">5000</option>
                  </select>
                </div>
              </div>

              <table>
                <thead>
                  <tr>
                    <th style="width: 20%;">Entity</th>
                    <th style="width: 26%;">Pset / Attr</th>
                    <th style="width: 26%;">Property</th>
                    <th>Value</th>
                  </tr>
                </thead>
                <tbody id="ifcTableBody"></tbody>
              </table>

              <div class="small" style="margin-top:8px;">
                Для очень больших IFC ограничивайте вывод и используйте фильтр.
              </div>
            </details>

          </div>

        </div>
      </div>

      <!-- RIGHT -->
      <div class="card card-sticky">
        <div class="card-h">
                  <div class="topActions">
            <button class="primary" id="btnGenerateTop">Сгенерировать XML</button>
            <div class="pill" id="xmlState">XML не сформирован</div>
          </div>
        </div>

        <div class="card-b">

          <div class="fillBox">
            <div class="fillRow">
              <div class="small">
                Прогресс заполнения обязательных параметров: <span class="mono" id="fillCount">0/0</span>
              </div>
              <div class="pill" id="fillPercent">0%</div>
            </div>
            <div class="progress" style="margin-top:8px; width:100%;">
              <div class="bar" id="barFill" style="width:0%"></div>
            </div>
            <div class="small" style="margin-top:8px;" id="fillHint">
              Заполняйте поля слева — прогресс обновляется автоматически.
            </div>
          </div>

          <div class="small" style="margin-top:10px;">
            Корневой элемент: <span class="mono">&lt;ArchitecturalUrbanPlanningSolution&gt;</span>.
            Обязательные поля проверяются при генерации.
          </div>

          <div style="margin-top:10px;">
            <label>XML (readonly)</label>
            <textarea id="xmlOut" readonly spellcheck="false"></textarea>
          </div>

          <div class="btns" style="margin-top:10px;">
            <button class="primary" id="btnDownload" disabled>Скачать XML файл</button>
            <button class="ghost" id="btnCopyXml" disabled>Скопировать XML</button>
          </div>

			<div style="margin-top:18px;">
	  <a href="https://forms.yandex.ru/cloud/6991b7b76d2d73bd3aa9f78a"
	     target="_blank"
	     class="feedback-btn">
	     Оставить обратную связь
	  </a>
	</div>

          <div id="validationBox" style="margin-top:10px;"></div>
        </div>
      </div>

    </div>

    <div class="footer">
<div style="display:flex;justify-content:center;align-items:center;gap:20px;flex-wrap:wrap;">

<div class="metrika-box">
<a href="https://metrika.yandex.ru/stat/?id=106828542&amp;from=informer"
target="_blank" rel="nofollow">
<img src="https://informer.yandex.ru/informer/106828542/1_0_312B1EFF_312B1EFF_1_pageviews"
width="80"
height="15"
alt="Яндекс.Метрика">
</a>
</div>

<span>разработано <a href="https://t.me/SMailsPub" target="_blank"> Маричевым Алексеем</a>
</span>

</div>

  <script src="assets/js/xml-generator.js"></script>
</body>
</html>
